{
    admin off
    email {$ACME_EMAIL} # Email for Let's Encrypt expiry notifications.
}

# APP_HOST is passed in via the environment (e.g. foo.com).
# Caddy automatically issues a Let's Encrypt certificate via Cloudflare DNS challenge.
# Wildcard cert covers foo.com and any subdomain (e.g. bar.foo.com).
{$APP_HOST}, *.{$APP_HOST} {
    root * /app/public
    php_server
    file_server

    tls {
       dns cloudflare {$CF_DNS_API_TOKEN}
    }
}
